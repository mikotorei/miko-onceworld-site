<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ .Title }} | {{ site.Title }}</title>

  <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
  <link rel="stylesheet" href="{{ "css/monster.css" | relURL }}">
</head>
<body>

<header class="site-header">
  <h1 class="site-title">
    <a href="{{ .Site.Home.RelPermalink }}">
      {{ site.Title }}
    </a>
  </h1>

  <!-- ハンバーガーボタン（スマホで表示） -->
  <button class="menu-toggle" type="button" aria-label="メニュー" aria-expanded="false">
    ☰
  </button>

  <!-- ナビ（スマホは左ドロワー、PCは横並び） -->
  <nav class="site-nav" aria-label="サイトメニュー">
    <a href="{{ "/monster/" | relURL }}">モンスター一覧</a>
    <a href="{{ "/tools/" | relURL }}">ツール</a>
  </nav>

  <!-- 背景オーバーレイ（メニュー開閉用） -->
  <div class="nav-overlay" aria-hidden="true"></div>
</header>

<main>
  {{ block "main" . }}
  {{ end }}
</main>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".site-nav");
  const overlay = document.querySelector(".nav-overlay");

  if (!toggle || !nav || !overlay) return;

  function openMenu() {
    nav.classList.add("is-open");
    overlay.classList.add("is-open");
    toggle.setAttribute("aria-expanded", "true");
    toggle.textContent = "✕";
    document.body.classList.add("no-scroll");
  }

  function closeMenu() {
    nav.classList.remove("is-open");
    overlay.classList.remove("is-open");
    toggle.setAttribute("aria-expanded", "false");
    toggle.textContent = "☰";
    document.body.classList.remove("no-scroll");
  }

  toggle.addEventListener("click", () => {
    if (nav.classList.contains("is-open")) closeMenu();
    else openMenu();
  });

  overlay.addEventListener("click", closeMenu);

  // PC幅に戻ったら閉じて整合性を保つ
  window.addEventListener("resize", () => {
    if (window.matchMedia("(min-width: 769px)").matches) closeMenu();
  });
});
</script>

</body>
</html>
