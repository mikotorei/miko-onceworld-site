{{ define "main" }}
<article class="monster-detail">

  <!-- タイトル -->
  <h1 class="monster-title">{{ .Title }}</h1>

  <!-- 画像 -->
  {{ with .Params.image }}
    <div class="monster-image">
      <img src="{{ . | relURL }}" alt="{{ $.Title }}">
    </div>
  {{ end }}

  <!-- ステータス -->
  <section class="monster-stats">

    <!-- 名前+簡易情報 -->
    <p class="monster-basic">
      <span class="monster_name">名前:</span>
      <span class="monster_name_physic">{{ .Title }}</span>
      ({{ .Params.attack_type }}・{{ .Params.attack_range }}・{{ .Params.element }})
    </p>

    <!-- Lv操作（ショートカット追加：横並び） -->
    <div class="level-control">

      {{ with .Params.level_shortcuts }}
        <div class="level-shortcuts" aria-label="レベルショートカット">
          {{/* 1以上のみ / 重複除去 / 昇順 */}}
          {{ $seen := dict }}
          {{ range sort . "value" "asc" }}
            {{ $lv := int . }}
            {{ if ge $lv 1 }}
              {{ $key := printf "%d" $lv }}
              {{ if not (isset $seen $key) }}
                {{ $seen = merge $seen (dict $key true) }}
                <button type="button" class="level-shortcut-btn" data-level="{{ $lv }}">Lv{{ $lv }}</button>
              {{ end }}
            {{ end }}
          {{ end }}
        </div>
      {{ end }}

      <label for="monster-level">Lv</label>
      <input type="number" id="monster-level" value="1" min="1">
    </div>

    <!-- ステータス（ひとかたまり） -->
    <section class="monster-panel monster-panel--status">
      <h2>ステータス</h2>

      <div class="table">
        <div class="table_top">

          <!-- 左：能力値 -->
          <dl class="table_status" id="status-table">

            <div class="stat-row">
              <dt>VIT</dt>
              <dd data-stat="vit" data-base="{{ .Params.vit }}">{{ lang.FormatNumber 0 .Params.vit }}</dd>
            </div>

            <div class="stat-row">
              <dt>SPD</dt>
              <dd data-stat="spd" data-base="{{ .Params.spd }}">{{ lang.FormatNumber 0 .Params.spd }}</dd>
            </div>

            <div class="stat-row">
              <dt>ATK</dt>
              <dd data-stat="atk" data-base="{{ .Params.atk }}">{{ lang.FormatNumber 0 .Params.atk }}</dd>
            </div>

            <div class="stat-row">
              <dt>INT</dt>
              <dd data-stat="int" data-base="{{ .Params.int }}">{{ lang.FormatNumber 0 .Params.int }}</dd>
            </div>

            <div class="stat-row">
              <dt>DEF</dt>
              <dd data-stat="def" data-base="{{ .Params.def }}">{{ lang.FormatNumber 0 .Params.def }}</dd>
            </div>

            <div class="stat-row">
              <dt>M-DEF</dt>
              <dd data-stat="mdef" data-base="{{ .Params.mdef }}">{{ lang.FormatNumber 0 .Params.mdef }}</dd>
            </div>

            <div class="stat-row">
              <dt>LUK</dt>
              <dd data-stat="luk" data-base="{{ .Params.luk }}">{{ lang.FormatNumber 0 .Params.luk }}</dd>
            </div>

            <div class="stat-row">
              <dt>MOV</dt>
              <dd data-stat="mov" data-base="{{ .Params.mov }}">{{ lang.FormatNumber 0 .Params.mov }}</dd>
            </div>

          </dl>

          <!-- 右：その他情報 -->
          <dl class="table_infomasion" id="info-table">

            <div class="stat-row">
              <dt>EXP</dt>
              <dd data-stat="exp" data-base="{{ .Params.exp }}">{{ lang.FormatNumber 0 .Params.exp }}</dd>
            </div>

            <div class="stat-row">
              <dt>GOLD</dt>
              <dd>{{ lang.FormatNumber 0 .Params.gold }}</dd>
            </div>

            <div class="stat-row">
              <dt>捕獲確率</dt>
              <dd>{{ .Params.rate }}%</dd>
            </div>

          </dl>

        </div>
      </div>
    </section>
  </section>

  <!-- ドロップ -->
  {{ with .Params.drop }}
  <section class="monster-drop">
    <h2>ドロップアイテム</h2>
    <ul>
      {{ range . }}
        <li>{{ . }}</li>
      {{ end }}
    </ul>
  </section>
  {{ end }}

  <!-- 出現場所 -->
  {{ with .Params.locations }}
  <section class="monster-locations">
    <h2>出現場所</h2>
    <ul>
      {{ range . }}
        <li>{{ . }}</li>
      {{ end }}
    </ul>
  </section>
  {{ end }}

  <!-- ★ fmt() を使えるように先に読み込む -->
  <script src="{{ "js/utils/format.js" | relURL }}"></script>
  <script src="{{ "js/status-calc.js" | relURL }}"></script>
  <script src="{{ "js/level-shortcuts.js" | relURL }}"></script>

  <p><a href="{{ "/monster/" | relURL }}">一覧に戻る</a></p>
</article>
{{ end }}
